name: hiway
ec2:
    type: m3.medium
    image: ami-9a562df2
    region: us-east-1
    price: 0.1

cookbooks:
  hadoop:
    github: "marcbux/apache-hadoop-chef"
    branch: "master"
  hiway:
    github: "marcbux/hiway-chef"
    branch: "master"

attrs:
  hadoop:
    yarn:
      nm:
        memory_mbs: '6656'
      vcores: '7'
    
groups:
  clientmaster:
    size: 1
    recipes:
        - hadoop::nn
        - hadoop::rm
        - hadoop::jhs
        - hiway::rm
        - hiway::cuneiform
        - hiway::helloworld_client
        - hiway::helloworld_run_loc
        - hiway::wordcount_client
        - hiway::wordcount_run_loc
        - hiway::variantcall_hg38_client
        - hiway::variantcall_hg38_run_hw
        - hiway::montage_synth_client
        - hiway::montage_synth_run_hw
        - hiway::galaxy101_client
        - hiway::galaxy101_run_hw

  workerslaves:
    size: 2
    recipes:
        - hadoop::dn
        - hadoop::nm
        - hiway::nm
        - hiway::galaxy
        - hiway::cuneiform
        - hiway::variantcall_hg38_worker
        - hiway::galaxy101_worker
